<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>code coverage of models.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">
pre.code {
    font-style: Lucida,"Courier New";
}
.number {
    color: #0080C0;
}
.operator {
    color: #000000;
}
.string {
    color: #008000;
}
.comment {
    color: #808080;
}
.name {
    color: #000000;
}
.error {
    color: #FF8080;
    border: solid 1.5pt #FF0000;
}
.keyword {
    color: #0000FF;
    font-weight: bold;
}
.text {
    color: #000000;
}
.notcovered {
    background-color: #FFB2B2;
}
</style>

</head>
<body>
<pre class="code">
<span class="string">'''
Models file for the stats. 

These store and load user statistics.

@author Mark Guis 
@author Andrew J. Musselman
'''</span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">django</span><span class="operator">.</span><span class="name">db</span> <span class="keyword">import</span> <span class="name">models</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">django</span><span class="operator">.</span><span class="name">contrib</span><span class="operator">.</span><span class="name">auth</span><span class="operator">.</span><span class="name">models</span> <span class="keyword">import</span> <span class="name">User</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">courses</span><span class="operator">.</span><span class="name">models</span> <span class="keyword">import</span> <span class="name">Course</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">pages</span><span class="operator">.</span><span class="name">models</span> <span class="keyword">import</span> <span class="name">Page</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">pages</span><span class="operator">.</span><span class="name">quiz</span><span class="operator">.</span><span class="name">models</span> <span class="keyword">import</span> <span class="name">Quiz</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">from</span> <span class="name">pages</span><span class="operator">.</span><span class="name">quiz</span><span class="operator">.</span><span class="name">question</span><span class="operator">.</span><span class="name">models</span> <span class="keyword">import</span> <span class="name">Question</span></span><span class="text">
</span><span class="notcovered"></span><span class="text">
</span><span class="notcovered"><span class="comment"># Create your models here.
</span></span><span class="text">
</span><span class="notcovered"><span class="keyword">class</span> <span class="name">Stat</span><span class="operator">(</span><span class="name">models</span><span class="operator">.</span><span class="name">Model</span><span class="operator">)</span><span class="operator">:</span></span><span class="text">
</span><span class="notcovered">        <span class="string">'''
        This is an individual tuple for a stat. 
    
    This stores an individual users result from a single quiz taken a sigle 
    single time. If a single user takes a quiz mutple times, it will generate
    mutple stats. 
        '''</span></span><span class="text">
</span><span class="notcovered">        <span class="name">course</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ForeignKey</span><span class="operator">(</span><span class="name">Course</span><span class="operator">,</span> <span class="name">related_name</span><span class="operator">=</span><span class="string">'stats'</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered">        <span class="name">user</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ForeignKey</span><span class="operator">(</span><span class="name">User</span><span class="operator">,</span> <span class="name">related_name</span><span class="operator">=</span><span class="string">'stats'</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered">        <span class="name">page</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ForeignKey</span><span class="operator">(</span><span class="name">Page</span><span class="operator">,</span> <span class="name">related_name</span><span class="operator">=</span><span class="string">'stats'</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered">        <span class="name">score</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">IntegerField</span><span class="operator">(</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered">        <span class="name">maxscore</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">IntegerField</span><span class="operator">(</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered">        <span class="name">date</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">DateTimeField</span><span class="operator">(</span><span class="name">auto_now_add</span><span class="operator">=</span><span class="name">True</span><span class="operator">)</span></span><span class="text">
</span><span class="notcovered"></span><span class="text">
</span><span class="notcovered">        <span class="operator">@</span><span class="name">staticmethod</span></span><span class="text">
</span>        <span class="keyword">def</span> <span class="name">CreateStat</span><span class="operator">(</span><span class="name">course</span><span class="operator">,</span> <span class="name">page</span><span class="operator">,</span> <span class="name">user</span><span class="operator">,</span> <span class="name">score</span><span class="operator">)</span><span class="operator">:</span><span class="text">
</span>                <span class="string">''' Create a new Stat Entry
                Creates a new entry in the stats table for the passed course, page,
                and user.  The entry is timestamped automatically. The maxscore
                is generated at the time that stat is created. This field is 
                simply the number of questions in the quiz. 

                Returns the statistic after saving it to the database.

                We assume you the page you are calling this function with is a quiz.
                It is an error to call this function with a page that isn't a quiz.
                Don't do that.
                '''</span><span class="text">
</span>                <span class="name">maxscore</span> <span class="operator">=</span> <span class="name">page</span><span class="operator">.</span><span class="name">quiz</span><span class="operator">.</span><span class="name">questions</span><span class="operator">.</span><span class="name">count</span><span class="operator">(</span><span class="operator">)</span> <span class="text">
</span>                <span class="name">s</span> <span class="operator">=</span> <span class="name">Stat</span><span class="operator">(</span><span class="name">course</span><span class="operator">=</span><span class="name">course</span><span class="operator">,</span> <span class="name">page</span><span class="operator">=</span><span class="name">page</span><span class="operator">,</span> <span class="name">user</span><span class="operator">=</span><span class="name">user</span><span class="operator">,</span> <span class="name">score</span><span class="operator">=</span><span class="name">score</span><span class="operator">,</span> <span class="text">
</span>                        <span class="name">maxscore</span> <span class="operator">=</span> <span class="name">maxscore</span><span class="operator">)</span><span class="text">
</span>                <span class="name">s</span><span class="operator">.</span><span class="name">save</span><span class="operator">(</span><span class="operator">)</span><span class="text">
</span>                <span class="keyword">return</span> <span class="name">s</span><span class="text">
</span><span class="text">
</span><span class="notcovered">        <span class="keyword">def</span> <span class="name">__unicode__</span><span class="operator">(</span><span class="name">self</span><span class="operator">)</span><span class="operator">:</span></span><span class="text">
</span><span class="notcovered">                <span class="string">''' Returns the string representation of a stat for debugging. '''</span></span>  <span class="text">
</span><span class="notcovered">                <span class="keyword">return</span> <span class="string">u'Stat for User '</span> <span class="operator">+</span> <span class="name">unicode</span><span class="operator">(</span><span class="name">self</span><span class="operator">.</span><span class="name">user</span><span class="operator">)</span> <span class="operator">+</span> <span class="string">u' and Lesson '</span> \
                        <span class="operator">+</span> <span class="name">unicode</span><span class="operator">(</span><span class="name">self</span><span class="operator">.</span><span class="name">page</span><span class="operator">)</span><span class="text"></span></span>
</pre></body>
</html>
