<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<title>
How to Run Website
</title>
</head>
<body>

<h2>Hosted website environment</h2>

<p>
Our project is hosted at 
<a href="https://autotutor.csc.calpoly.edu/demo/">https://autotutor.csc.calpoly.edu/demo/</a>
</p>

<p>
We are using a self-signed SSL certificate that most modern browsers will
complain about.  You will need to add the certificate to your browsers trust store
in order for this to work properly.  This process will vary by browser.  
The SHA1 fingerprint for this certificate is 
</p>

<pre>D3:06:7B:AE:DA:2A:08:AA:E1:CE:B5:FA:98:D9:AD:1C</pre>

<p>
Test data has been loaded.  Several users exist that can be logged in.  Of note
are the "mgius" user, who is the course owner of the CPE102 course, and "jinloes"
who is the course owner of the CPE103 course. The password for both of these 
users is "password"
</p>


<h2>Setting up project using Apache and mod_python on Linux</h2>

<p>
These instructions assume a reasonable knowledge of Apache and it's
configuration. A full configuration manual for Apache is available at the
<a href="http://httpd.apache.org/docs/">Apache Documentation Site</a>. Package
names are based off Debian 5.0 ("lenny") and will vary by distribution.
</p>

<p>
Ensure that RestrictedPython, django 1.0 or greater, sqlite, apache, and mod_python are installed.
</p>

<pre> apt-get install python-django libsqlite3-0 apache2 libapache2-mod-python 
 easy_install RestrictedPython </pre>

<p>
Once these are installed, deploy the CSTutor source somewhere on your 
filesystem.  Examples will use the local path '/opt/cstutor' and the server
location of http://hostname/cstutor
</p>

<p>
Edit your apache configuration file and add the following directives.
</p>

<pre>
Alias /cstutor/media /opt/cstutor/implementation/static
Alias /cstutor /opt/cstutor/implementation

&lt;LocationMatch ^/cstutor&gt;
SetHandler python-program
PythonHandler django.core.handlers.modpython

# tells django where the site is "mounted" so that it can construct
# and dissect URLs properly
PythonOption django.root /cstutor

# adds the project to the python search path
PythonPath "sys.path + ['/opt/cstutor'] + ['/opt/cstutor/implementation/']"
SetEnv DJANGO_SETTINGS_MODULE cstutor.settings

# should be disabled for production sites
PythonDebug On

# isolates the site from other mod_python projects
PythonIntercodeter cstutor

&lt;/LocationMatch&gt;

# forces "static" media to be served by apache direct
&lt;Location "/cstutor/media"&gt;
SetHandler None
&lt;/Location&gt;
</pre>

<p>
cd to /opt/cstutor/implementation, and edit settings.py.  The following
attributes need to be modified
</p>

<pre>
DATABASE_ENGINE='sqlite3'
DATABASE_NAME='/full/path/to/desired/database/location'

MEDIA_URL='http://hostname/cstutor/media/'
LOGIN_URL='/cstutor/login/'
</pre>

<p>
Run "make database" from /opt/cstutor/implementation to build the database
tables.  
</p>

<p>
<strong>VERIFY THAT ALL SOURCE FILES AND THE DATABASE FILE ARE ACCESSIBLE
TO THE USER THAT APACHE RUNS AS</strong>
</p>

<p>
Restart apache, and attempt to reach the site at http://hostname/cstutor/
</p>

<h3> Other webserver/Python handlers</h3>
<p>
Our site does not depend upon Apache or mod_python in any way.  Any supported
Django server setup should work with our site.  If you have interest in a 
non Apache + mod_python hosting solution, please consult the Django 
<a href="http://docs.djangoproject.com/en/1.0/howto/deployment/">Deployment Documentation</a>
</p>

<h2>How To Run Development Website</h2>
<ol>
	<li> Install Django
		<ul>
			<li> Mac / Linux
				<ul>
				<li> Download the tar from http://www.djangoproject.com/download/</li>
				<li> Run these commands where you download it:</li>
				<li> tar xzvf Django-1.1.1.tar.gz</li>
				<li> cd Django-1.1.1</li>
				<li> sudo python setup.py install<br />
					  NOTE: These instructions are also in the link above
				</li>
				</ul>
			</li>
			<li> Debian
				<ul>
				<li> sudo apt-get install python-django </li>
				</ul>
			</li>
		</ul>
	</li>
	<li>Install Django Debug Toolbar
		<ul>
		<li>Run this command: easy_install django-debug-toolbar</li>
		</ul>
	</li>
	<li>Setup up database and Web server
		<ul>
		<li> Within the implementation folder, run these commands: 
			<ul>
			<li> make clean</li>
			<li> make database</li>
			<li> make runserver</li>
			</ul>
		</li>
		<li> If you ever need to rebuild the database don't forget to run make cleandatabase before building the database again</li>
		<li> Once it is running, you should see a line in the output that is similar to below</li>
		<li> Development server is running at http://127.0.0.1:8000/</li>
		<li> You should be able to access our website at that url.</li>
		</ul> 
	</li>
</ol>
</body>
</html>
